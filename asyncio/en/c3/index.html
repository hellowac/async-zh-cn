
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="hellowac-异步编程资料">
      
      
      
      
        <link rel="prev" href="../c2/">
      
      
        <link rel="next" href="../c4/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.4">
    
    
      
        <title>3. Asyncio 在什么时候使用 - async异步编程</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.bd3936ea.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#3-asyncio-在什么时候使用" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
你当前浏览的版本已不是最新版本，
<a href="../../../..">
    <strong>点击这里</strong>
</a>查看最新版本的文档

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="async异步编程" class="md-header__button md-logo" aria-label="async异步编程" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            async异步编程
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              3. Asyncio 在什么时候使用
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hellowac/async-zh-cn" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hellowac/async-zh-cn
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../.." class="md-tabs__link">
          
  
    
  
  概览

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  完整指南

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../runner/" class="md-tabs__link">
          
  
    
  
  其他

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="async异步编程" class="md-nav__button md-logo" aria-label="async异步编程" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    async异步编程
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hellowac/async-zh-cn" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    hellowac/async-zh-cn
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
    
      
        
          
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../.." class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    概览
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            概览
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    完整指南
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            完整指南
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. 什么是异步编程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Asyncio 是什么
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    3. Asyncio 在什么时候使用
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    3. Asyncio 在什么时候使用
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#31-使用python-asyncio的原因" class="md-nav__link">
    3.1 使用Python Asyncio的原因
  </a>
  
    <nav class="md-nav" aria-label="3.1 使用Python Asyncio的原因">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311-原因-1-使用协程" class="md-nav__link">
    3.1.1 原因 1: 使用协程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#312-原因-2-使用异步编程" class="md-nav__link">
    3.1.2 原因 2: 使用异步编程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#313-原因-3-使用非阻塞io" class="md-nav__link">
    3.1.3 原因 3: 使用非阻塞I/O
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#32-使用asyncio的其他原因" class="md-nav__link">
    3.2 使用Asyncio的其他原因
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#33-asyncio在什么时候不适用" class="md-nav__link">
    3.3 Asyncio在什么时候不适用
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Python 中的协程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. 定义、创建和运行协程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. 事件循环是什么
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. Asyncio 任务的创建和运行
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8. 使用和查询任务
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9. 当前正在运行的任务
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10. 同时运行多个协程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c11/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11. 在Group中管理多个协程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c12/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    12. 等待任务的集合
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c13/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    13. 等待有时间限制的协程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c14/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    14. 防止任务被取消
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c15/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    15. 在 Asyncio 中运行阻塞任务
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c16/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    16. 异步迭代器
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c17/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    17. 异步生成器
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c18/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    18. 异步上下文管理器
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c19/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    19. 异步推导式
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c20/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    20. 在非阻塞子进程中运行命令
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c21/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    21. 非阻塞流
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c22/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    22. 检查网站状态的示例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c23/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    23. Python Asyncio 常见错误
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c24/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    24. Python Asyncio 常见问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c25/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    25. 使用 Asyncio 的常见反对意见
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c26/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    26. 进一步阅读
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../c27/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    27. 结论
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    其他
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            其他
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../runner/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    如何使用async.Runner执行多个协程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../task_group/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    如何使用 asyncio.TaskGroup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cheat_sheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Asyncio 表达式及API备忘录
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../api_mind_map/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    asyncio API 思维导图
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#31-使用python-asyncio的原因" class="md-nav__link">
    3.1 使用Python Asyncio的原因
  </a>
  
    <nav class="md-nav" aria-label="3.1 使用Python Asyncio的原因">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311-原因-1-使用协程" class="md-nav__link">
    3.1.1 原因 1: 使用协程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#312-原因-2-使用异步编程" class="md-nav__link">
    3.1.2 原因 2: 使用异步编程
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#313-原因-3-使用非阻塞io" class="md-nav__link">
    3.1.3 原因 3: 使用非阻塞I/O
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#32-使用asyncio的其他原因" class="md-nav__link">
    3.2 使用Asyncio的其他原因
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#33-asyncio在什么时候不适用" class="md-nav__link">
    3.3 Asyncio在什么时候不适用
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="3-asyncio-在什么时候使用">3. Asyncio 在什么时候使用<a class="headerlink" href="#3-asyncio-在什么时候使用" title="Permanent link">&para;</a></h1>
<p><strong>3. When to Use Asyncio</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">中文</label><label for="__tabbed_1_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>从广义上讲，Asyncio 是新的、流行的、讨论较多且令人兴奋的。</p>
<p>然而，对于何时应该在项目中采用它存在很多困惑。</p>
<p>我们什么时候应该在Python中使用asyncio？</p>
</div>
<div class="tabbed-block">
<p>Asyncio, broadly, is new, popular, much discussed, and exciting.</p>
<p>Nevertheless, there is a lot of confusion over when it should be adopted in a project.</p>
<p>When should we use asyncio in Python?</p>
</div>
</div>
</div>
<h2 id="31-使用python-asyncio的原因">3.1 使用Python Asyncio的原因<a class="headerlink" href="#31-使用python-asyncio的原因" title="Permanent link">&para;</a></h2>
<p><strong>3.1 Reasons to Use Asyncio in Python</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">中文</label><label for="__tabbed_2_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>在 Python 项目中使用 asyncio 可能有 3 个最重要的原因。</p>
<p>他们是:</p>
<ol>
<li>使用 asyncio 以便在程序中采用协程。</li>
<li>使用 asyncio 以便使用异步编程范例。</li>
<li>使用 asyncio 以便使用非阻塞I/O。</li>
</ol>
</div>
<div class="tabbed-block">
<p>There are perhaps 3 top-level reasons to use asyncio in a Python project.</p>
<p>They are:</p>
<p>Use asyncio in order to adopt coroutines in your program.
Use asyncio in order to use the asynchronous programming paradigm.
Use asyncio in order to use non-blocking I/O.</p>
</div>
</div>
</div>
<h3 id="311-原因-1-使用协程">3.1.1 原因 1: 使用协程<a class="headerlink" href="#311-原因-1-使用协程" title="Permanent link">&para;</a></h3>
<p><strong>3.1.1 Reason 1: To Use Coroutines</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">中文</label><label for="__tabbed_3_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>我们可能会选择使用 asyncio，因为我们想使用协程。</p>
<p>我们可能想要使用协程，因为我们的程序中可以有比并发线程更多的并发协程。</p>
<p>协程是另一个并发单元，就像线程和进程一样。</p>
<p>基于线程的并发由线程模块提供，并由底层操作系统支持。 它适合阻塞 I/O 任务，例如从文件、套接字和设备读取和写入。</p>
<p>基于进程的并发性由多处理模块提供，并且也受到底层操作系统（如线程）的支持。 它适用于不需要太多进程间通信的 CPU 密集型任务，例如计算任务。</p>
<p>协程是由 Python 语言和运行时（标准解释器）提供的替代方案，并由 asyncio 模块进一步支持。 它们适用于带有子进程和套接字的非阻塞 I/O，但是，阻塞 I/O 和 CPU 密集型任务可以在幕后使用线程和进程以模拟非阻塞方式使用。</p>
<p>最后一点是微妙而关键的。 尽管我们可以选择使用协程来实现 Python 中引入的非阻塞功能，但实际上我们可以将它们用于任何任务。 如果我们愿意，任何使用线程或进程编写的程序都可以重写或使用协程编写。</p>
<p>线程和进程通过操作系统选择哪些线程和进程应该运行、何时运行以及运行多长时间来实现多任务处理。 操作在线程和进程之间快速切换，暂停那些未运行的线程和进程，并恢复那些授予时间运行的线程和进程。 这称为抢占式多任务处理。</p>
<p>Python 中的协程提供了另一种多任务处理类型，称为<strong>协作多任务处理</strong>(cooperating multitasking)。</p>
<p>协程是可以暂停和恢复的子例程（函数）。 它由 await 表达式挂起，并在 await 表达式解析后恢复。</p>
<p>这允许协程通过设计进行合作，选择如何以及何时暂停执行。</p>
<p>它是一种替代的、有趣的、强大的并发方法，不同于基于线程和基于进程的并发。</p>
<p>仅此一点就可以成为在项目中采用它的理由。</p>
<p>协程的另一个关键方面是它们是轻量级的。</p>
<p>它们比线程更轻量。 这意味着它们的启动速度更快并且使用的内存更少。 本质上，协程是一种特殊类型的函数，而线程则由 Python 对象表示，并与操作系统中必须与该对象交互的线程相关联。</p>
<p>因此，<strong>Python 程序中可能有数千个线程，但我们可以轻松地将数万或数十万个协程集中在一个线程中。</strong></p>
<p>我们可能会因为协程的可扩展性而选择它们。</p>
</div>
<div class="tabbed-block">
<p>We may choose to use asyncio because we want to use coroutines.</p>
<p>We may want to use coroutines because we can have many more concurrent coroutines in our program than concurrent threads.</p>
<p>Coroutines are another unit of concurrency, like threads and processes.</p>
<p>Thread-based concurrency is provided by the threading module and is supported by the underlying operating system. It is suited to blocking I/O tasks such reading and writing from files, sockets, and devices.</p>
<p>Process-based concurrency is provided by the multiprocessing module and is also supported by the underlying operating system, like threads. It is suited to CPU-bound tasks that do not require much inter-process communication, such as compute tasks.</p>
<p>Coroutines are an alternative that is provided by the Python language and runtime (standard interpreter) and further supported by the asyncio module. They are suited to non-blocking I/O with subprocesses and sockets, however, blocking I/O and CPU-bound tasks can be used in a simulated non-blocking manner using threads and processes under the covers.</p>
<p>This last point is subtle and key. Although we can choose to use coroutines for the capability for which they were introduced into Python, non-blocking, we may in fact use them with any tasks. Any program written with threads or processes can be rewritten or instead written using coroutines if we so desire.</p>
<p>Threads and processes achieve multitasking via the operating system that chooses which threads and processes should run, when, and for how long. The operating switches between threads and processes rapidly, suspending those that are not running and resuming those granted time to run. This is called preemptive multitasking.</p>
<p>Coroutines in Python provide an alternative type of multitasking called cooperating multitasking.</p>
<p>A coroutine is a subroutine (function) that can be suspended and resumed. It is suspended by the await expression and resumed once the await expression is resolved.</p>
<p>This allows coroutines to cooperate by design, choosing how and when to suspend their execution.</p>
<p>It is an alternate, interesting, and powerful approach to concurrency, different from thread-based and process-based concurrency.</p>
<p>This alone may make it a reason to adopt it for a project.</p>
<p>Another key aspect of coroutines is that they are lightweight.</p>
<p>They are more lightweight than threads. This means they are faster to start and use less memory. Essentially a coroutine is a special type of function, whereas a thread is represented by a Python object and is associated with a thread in the operating system with which the object must interact.</p>
<p>As such, we may have thousands of threads in a Python program, but we could easily have tens or hundreds of thousands of coroutines all in one thread.</p>
<p>We may choose coroutines for their scalability.</p>
</div>
</div>
</div>
<h3 id="312-原因-2-使用异步编程">3.1.2 原因 2: 使用异步编程<a class="headerlink" href="#312-原因-2-使用异步编程" title="Permanent link">&para;</a></h3>
<p><strong>3.1.2 Reason 2: To Use Asynchronous Programming</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">中文</label><label for="__tabbed_4_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>我们可能会选择使用asyncio，因为我们想在我们的程序中使用异步编程。</p>
<p>也就是说，我们要开发一个使用异步编程范式的Python程序。</p>
<p>异步意味着不同时，与同步或同时相对。</p>
<p>编程时，异步意味着请求操作，但未在请求时执行。 这是稍后执行的。</p>
<p>异步编程通常意味着围绕异步函数调用和任务的概念全力以赴并设计程序。</p>
<p>尽管还有其他方法可以实现异步编程的元素，但 Python 中的完全异步编程需要使用协程和 asyncio 模块。</p>
<blockquote>
<p>它是一个 Python 库，允许我们使用异步编程模型运行代码。</p>
<p>— PAGE 3, <a href="https://amzn.to/3Cz7Zh6">PYTHON CONCURRENCY WITH ASYNCIO</a>, 2022.</p>
</blockquote>
<p>我们可能会选择使用asyncio，因为我们想在我们的程序中使用异步编程模块，这是一个有道理的理由。</p>
<p>明确地说，这个原因与使用非阻塞 I/O 无关。 异步编程可以独立于非阻塞 I/O 使用。</p>
<p>正如我们之前所看到的，协程可以异步执行非阻塞 I/O，但 asyncio 模块还提供了以异步方式执行阻塞 I/O 和 CPU 密集型任务的工具，通过线程和 流程。</p>
</div>
<div class="tabbed-block">
<p>We may choose to use asyncio because we want to use asynchronous programming in our program.</p>
<p>That is, we want to develop a Python program that uses the asynchronous programming paradigm.</p>
<p>Asynchronous means not at the same time, as opposed to synchronous or at the same time.</p>
<p>When programming, asynchronous means that the action is requested, although not performed at the time of the request. It is performed later.</p>
<p>Asynchronous programming often means going all in and designing the program around the concept of asynchronous function calls and tasks.</p>
<p>Although there are other ways to achieve elements of asynchronous programming, full asynchronous programming in Python requires the use of coroutines and the asyncio module.</p>
<blockquote>
<p>It is a Python library that allows us to run code using an asynchronous programming model.</p>
<p>— PAGE 3, <a href="https://amzn.to/3Cz7Zh6">PYTHON CONCURRENCY WITH ASYNCIO</a>, 2022.</p>
</blockquote>
<p>We may choose to use asyncio because we want to use the asynchronous programming module in our program, and that is a defensible reason.</p>
<p>To be crystal clear, this reason is independent of using non-blocking I/O. Asynchronous programming can be used independently of non-blocking I/O.</p>
<p>As we saw previously, coroutines can execute non-blocking I/O asynchronously, but the asyncio module also provides the facility for executing blocking I/O and CPU-bound tasks in an asynchronous manner, simulating non-blocking under the covers via threads and processes.</p>
</div>
</div>
</div>
<h3 id="313-原因-3-使用非阻塞io">3.1.3 原因 3: 使用非阻塞I/O<a class="headerlink" href="#313-原因-3-使用非阻塞io" title="Permanent link">&para;</a></h3>
<p><strong>3.1.3 Reason 3: To Use Non-Blocking I/O</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">中文</label><label for="__tabbed_5_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>我们可能会选择使用 asyncio，因为我们希望或需要在程序中使用非阻塞 I/O。</p>
<p>输入/输出或简称 I/O 表示从资源中读取或写入。</p>
<p>常见的例子包括：</p>
<ul>
<li>硬盘驱动器：读取、写入、追加、重命名、删除等文件。</li>
<li>外设：鼠标、键盘、屏幕、打印机、串口、摄像头等。</li>
<li>互联网：下载和上传文件、获取网页、查询RSS等。</li>
<li>数据库：查询、更新、删除等SQL查询。</li>
<li>电子邮件：发送邮件、接收邮件、查询收件箱等。</li>
</ul>
<p>与使用 CPU 进行计算相比，这些操作速度很慢。</p>
<p>在程序中实现这些操作的常见方式是发出读或写请求，然后等待数据发送或接收。</p>
<p>因此，这些操作通常称为阻塞 I/O 任务。</p>
<p>操作系统可以看到调用线程被阻塞，并将上下文切换到另一个将使用 CPU 的线程。</p>
<p>这意味着阻塞调用不会减慢整个系统的速度。 但它确实会停止或阻止进行阻塞调用的线程或程序。</p>
<p>这意味着阻塞调用不会减慢整个系统的速度。 但它确实会停止或阻止进行阻塞调用的线程或程序。</p>
<ul>
<li><a href="https://superfastpython.com/thread-blocking-call-in-python/">Python 中的线程阻塞调用</a></li>
</ul>
<p>非阻塞 I/O 是阻塞 I/O 的替代方案。</p>
<p>它需要底层操作系统的支持，就像阻塞 I/O 一样，所有现代操作系统都提供对某种形式的非阻塞 I/O 的支持。</p>
<p>非阻塞 I/O 允许将读取和写入调用作为异步请求进行。</p>
<p>操作系统将处理请求并在结果可用时通知调用程序。</p>
<ul>
<li><strong>非阻塞 I/O</strong>：通过异步请求和响应执行 I/O 操作，而不是等待操作完成。</li>
</ul>
<p>因此，我们可以看到非阻塞 I/O 与异步编程的关系。 事实上，我们通过异步编程来使用非阻塞I/O，或者说非阻塞I/O是通过异步编程来实现的。</p>
<p>非阻塞 I/O 与异步编程的结合非常常见，因此通常简称为异步 I/O。</p>
<ul>
<li><strong>异步 I/O</strong>：一种简写，指的是异步编程与非阻塞 I/O 的结合。</li>
</ul>
<p>Python 中的 asyncio 模块是专门为 Python 标准库添加对带有子进程（例如在操作系统上执行命令）和流（例如 TCP 套接字编程）的非阻塞 I/O 的支持而添加的。</p>
<p>我们可以使用线程以及Python线程池或线程池执行器提供的异步编程功能来模拟非阻塞I/O。</p>
<p>asyncio 模块通过协程、事件循环和对象来表示非阻塞子进程和流，为非阻塞 I/O 提供一流的异步编程。</p>
<p>我们可能会选择使用 asyncio，因为我们想在程序中使用异步 I/O，这是一个合理的理由。</p>
</div>
<div class="tabbed-block">
<p>We may choose to use asyncio because we want or require non-blocking I/O in our program.</p>
<p>Input/Output or I/O for short means reading or writing from a resource.</p>
<p>Common examples include:</p>
<ul>
<li>Hard disk drives: Reading, writing, appending, renaming, deleting, etc. files.</li>
<li>Peripherals: mouse, keyboard, screen, printer, serial, camera, etc.</li>
<li>Internet: Downloading and uploading files, getting a webpage, querying RSS, etc.</li>
<li>Database: Select, update, delete, etc. SQL queries.</li>
<li>Email: Send mail, receive mail, query inbox, etc.</li>
</ul>
<p>These operations are slow, compared to calculating things with the CPU.</p>
<p>The common way these operations are implemented in programs is to make the read or write request and then wait for the data to be sent or received.</p>
<p>As such, these operations are commonly referred to as blocking I/O tasks.</p>
<p>The operating system can see that the calling thread is blocked and will context switch to another thread that will make use of the CPU.</p>
<p>This means that the blocking call does not slow down the entire system. But it does halt or block the thread or program making the blocking call.</p>
<p>You can learn more about blocking calls in the tutorial:</p>
<ul>
<li><a href="https://superfastpython.com/thread-blocking-call-in-python/">Thread Blocking Call in Python</a></li>
</ul>
<p>Non-blocking I/O is an alternative to blocking I/O.</p>
<p>It requires support in the underlying operating system, just like blocking I/O, and all modern operating systems provide support for some form of non-blocking I/O.</p>
<p>Non-blocking I/O allows read and write calls to be made as asynchronous requests.</p>
<p>The operating system will handle the request and notify the calling program when the results are available.</p>
<ul>
<li><strong>Non-blocking I/O</strong>: Performing I/O operations via asynchronous requests and responses, rather than waiting for operations to complete.</li>
</ul>
<p>As such, we can see how non-blocking I/O is related to asynchronous programming. In fact, we use non-blocking I/O via asynchronous programming, or non-blocking I/O is implemented via asynchronous programming.</p>
<p>The combination of non-blocking I/O with asynchronous programming is so common that it is commonly referred to by the shorthand of asynchronous I/O.</p>
<ul>
<li><strong>Asynchronous I/O</strong>: A shorthand that refers to combining asynchronous programming with non-blocking I/O.
T
he asyncio module in Python was added specifically to add support for non-blocking I/O with subprocesses (e.g. executing commands on the operating system) and with streams (e.g. TCP socket programming) to the Python standard library.</li>
</ul>
<p>We could simulate non-blocking I/O using threads and the asynchronous programming capability provided by Python thread pools or thread pool executors.</p>
<p>The asyncio module provides first-class asynchronous programming for non-blocking I/O via coroutines, event loops, and objects to represent non-blocking subprocesses and streams.</p>
<p>We may choose to use asyncio because we want to use asynchronous I/O in our program, and that is a defensible reason.</p>
</div>
</div>
</div>
<h2 id="32-使用asyncio的其他原因">3.2 使用Asyncio的其他原因<a class="headerlink" href="#32-使用asyncio的其他原因" title="Permanent link">&para;</a></h2>
<p><strong>3.2 Other Reasons to Use Asyncio</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">中文</label><label for="__tabbed_6_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>理想情况下，我们会选择一个在项目要求的背景下得到辩护的理由。</p>
<p>有时我们可以控制函数和非函数需求，有时则不能。 在这种情况下，出于上述原因之一，我们可能会选择使用 asyncio。 在我们不这样做的情况下，我们可能会选择 asyncio 来交付解决特定问题的程序。</p>
<p>我们可能使用 asyncio 的其他一些原因包括：</p>
<ol>
<li>使用 asyncio 因为其他人已经为你做出了决定。</li>
<li>使用 asyncio，因为您加入的项目已经在使用它。</li>
<li>使用 asyncio 因为您想了解更多有关它的信息。</li>
</ol>
<p>我们并不总是能够完全控制我们所从事的项目。</p>
<p>开始一项新工作、新角色或新项目并由直线经理或首席架构师告知具体设计和技术决策是很常见的。</p>
<p>使用 asyncio 可能是这些决定之一。</p>
<p>我们可能在项目上使用 asyncio，因为该项目已经在使用它。 你必须使用asyncio，而不是你选择使用asyncio。</p>
<p>一个相关的示例可能是使用您希望采用的 asyncio 解决问题的情况。</p>
<p>例如：</p>
<ul>
<li>也许您需要使用第三方 API，并且代码示例使用 asyncio。</li>
<li>也许您需要集成使用 asyncio 的现有开源解决方案。</li>
<li>也许您偶然发现一些代码片段可以满足您的需要，但它们使用 asyncio。</li>
</ul>
<p>由于缺乏替代解决方案，asyncio 可能会因您选择的解决方案而强加给您。</p>
<p>最后，我们可以为我们的Python项目选择asyncio来了解更多。</p>
<p>你可能会嘲笑，“那要求呢？”</p>
<p>您可能选择采用 asyncio 只是因为您想尝试一下，并且这是一个合理的理由。</p>
<p>在项目中使用 asyncio 将使您的工作更加具体。</p>
</div>
<div class="tabbed-block">
<p>Ideally, we would choose a reason that is defended in the context of the requirements of the project.</p>
<p>Sometimes we have control over the function and non-functional requirements and other times not. In the cases we do, we may choose to use asyncio for one of the reasons listed above. In the cases we don’t, we may be led to choose asyncio in order to deliver a program that solves a specific problem.</p>
<p>Some other reasons we may use asyncio include:</p>
<ol>
<li>Use asyncio because someone else made the decision for you.</li>
<li>Use asyncio because the project you have joined is already using it.</li>
<li>Use asyncio because you want to learn more about it.</li>
</ol>
<p>We don’t always have full control over the projects we work on.</p>
<p>It is common to start a new job, new role, or new project and be told by the line manager or lead architect of specific design and technology decisions.</p>
<p>Using asyncio may be one of these decisions.</p>
<p>We may use asyncio on a project because the project is already using it. You must use asyncio, rather than you choose to use asyncio.</p>
<p>A related example might be the case of a solution to a problem that uses asyncio that you wish to adopt.</p>
<p>For example:</p>
<ul>
<li>Perhaps you need to use a third-party API and the code examples use asyncio.</li>
<li>Perhaps you need to integrate an existing open-source solution that uses asyncio.</li>
<li>Perhaps you stumble across some code snippets that do what you need, yet they use asyncio.</li>
</ul>
<p>For lack of alternate solutions, asyncio may be thrust upon you by your choice of solution.</p>
<p>Finally, we may choose asyncio for our Python project to learn more about.</p>
<p>You may scoff, “what about the requirements?”</p>
<p>You may choose to adopt asyncio just because you want to try it out and it can be a defensible reason.</p>
<p>Using asyncio in a project will make its workings concrete for you.</p>
</div>
</div>
</div>
<h2 id="33-asyncio在什么时候不适用">3.3 Asyncio在什么时候不适用<a class="headerlink" href="#33-asyncio在什么时候不适用" title="Permanent link">&para;</a></h2>
<p><strong>3.3 When to Not Use Asyncio</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">中文</label><label for="__tabbed_7_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>我们花了很多时间来解释为什么应该使用 asyncio。</p>
<p>至少花一点时间来解释为什么我们不应该使用它可能是个好主意。</p>
<p>不使用 asyncio 的原因之一是您无法使用上述原因之一来捍卫它的使用。</p>
<p>这并不是万无一失的。 可能还有其他未在上面列出的原因使用它。</p>
<p>但是，如果您选择使用 asyncio 的原因，并且对于您的具体情况来说，这个原因感觉很薄弱或充满漏洞。 也许 asyncio 不是正确的解决方案。</p>
<p>我认为不使用 asyncio 的主要原因是它没有提供您认为的好处。</p>
<p>关于 Python 并发，尤其是 asyncio，存在许多误解。</p>
<p>例如:</p>
<ul>
<li>Asyncio 将解决全局解释器锁问题。</li>
<li>异步比线程更快。</li>
<li>Asyncio 避免了对互斥锁和其他同步原语的需要。</li>
<li>Asyncio 比线程更容易使用。</li>
</ul>
<p>这些都是假的。</p>
<p>按照设计，一次只能运行一个协程，它们协作执行。 这就像 GIL 下的线程一样。 事实上，GIL 是一个正交问题，在大多数情况下使用 asyncio 时可能是不相关的。</p>
<p>任何可以使用 asyncio 编写的程序，都可以使用线程编写，并且速度可能会一样快，甚至更快。 它也可能会更简单、更容易被其他开发人员阅读和解释。</p>
<p>您可能会在线程中遇到任何并发故障模式，您可能会在协程中遇到这种情况。 您必须使协程免受死锁和竞争条件的影响，就像线程一样。</p>
<p>不使用 asyncio 的另一个原因是您不喜欢异步编程。</p>
<p>异步编程在许多不同的编程社区（尤其是 JavaScript 社区）中已经流行了一段时间。</p>
<p>它不同于过程式、面向对象和函数式编程，有些开发人员就是不喜欢它。</p>
<p>没问题。 如果您不喜欢它，请不要使用它。 这是一个合理的理由。</p>
<p>您可以通过多种方式实现相同的效果，特别是根据需要通过线程或进程执行器进行一些异步调用。</p>
<p>现在我们已经熟悉了何时使用 asyncio，让我们更详细地了解一下协程。</p>
</div>
<div class="tabbed-block">
<p>We have spent a lot of time on reasons why we should use asyncio.</p>
<p>It is probably a good idea to spend at least a moment on why we should not use it.</p>
<p>One reason to not use asyncio is that you cannot defend its use using one of the reasons above.</p>
<p>This is not foolproof. There may be other reasons to use it, not listed above.</p>
<p>But, if you pick a reason to use asyncio and the reason feels thin or full of holes for your specific case. Perhaps asyncio is not the right solution.</p>
<p>I think the major reason to not use asyncio is that it does not deliver the benefit that you think it does.</p>
<p>There are many misconceptions about Python concurrency, especially around asyncio.</p>
<p>For example:</p>
<ul>
<li>Asyncio will work around the global interpreter lock.</li>
<li>Asyncio is faster than threads.</li>
<li>Asyncio avoids the need for mutex locks and other synchronization primitives.</li>
<li>Asyncio is easier to use than threads.</li>
</ul>
<p>These are all false.</p>
<p>Only a single coroutine can run at a time by design, they cooperate to execute. This is just like threads under the GIL. In fact, the GIL is an orthogonal concern and probably irrelevant in most cases when using asyncio.</p>
<p>Any program you can write with asyncio, you can write with threads and it will probably be as fast or faster. It will also probably be simpler and easier to read and interpret by fellow developers.</p>
<p>Any concurrency failure mode you might expect with threads, you can encounter with coroutines. You must make coroutines safe from deadlocks and race conditions, just like threads.</p>
<p>Another reason to not use asyncio is that you don’t like asynchronous programming.</p>
<p>Asynchronous programming has been popular for some time now in a number of different programming communities, most notably the JavaScript community.</p>
<p>It is different from procedural, object-oriented, and functional programming, and some developers just don’t like it.</p>
<p>No problem. If you don’t like it, don’t use it. It’s a fair reason.</p>
<p>You can achieve the same effect in many ways, notably by sprinkling a few asynchronous calls in via thread or process executors as needed.</p>
<p>Now that we are familiar with when to use asyncio, let’s look at coroutines in more detail.</p>
</div>
</div>
</div>

  <hr>
<div class="md-source-file">
  <small>
    
      最后更新:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年9月4日</span>
      
        <br>
        创建日期:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年9月4日</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["header.autohide", "navigation.top", "navigation.tabs", "navigation.tabs.sticky", "navigation.path", "content.tabs.link", "content.code.copy", "content.tooltips", "navigation.indexes", "navigation.prune", "navigation.instant"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.94c44541.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>